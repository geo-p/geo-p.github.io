(window["webpackJsonpnfq-assessment-gpenney"]=window["webpackJsonpnfq-assessment-gpenney"]||[]).push([[0],{25:function(e,t,a){e.exports=a(44)},30:function(e,t,a){},36:function(e,t,a){},39:function(e,t,a){},40:function(e,t,a){},41:function(e,t,a){},42:function(e,t,a){},43:function(e,t,a){},44:function(e,t,a){"use strict";a.r(t);var n=a(0),i=a.n(n),o=a(21),l=a.n(o),r=a(3),c=a(4),s=a(6),m=a(5),d=a(11),u=a(7),h=a(12),p=a(13),v=(a(30),a(8)),f=a(9);a(36);function E(){return[1,2,3].map(function(e){return i.a.createElement("div",{className:"image-grid-filler",key:e})})}var b=function(e){function t(){var e,a;Object(r.a)(this,t);for(var n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return(a=Object(s.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(i)))).state={loaded:!1},a}return Object(u.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){var e=this,t=document.createElement("img");t.src=this.props.data.previewUrl,t.addEventListener("load",function(){e.setState({loaded:!0})})}},{key:"render",value:function(){var e=this,t=this.props.data,a=i.a.createElement("div",{className:"item-actions"},i.a.createElement("button",{title:"Favorite",className:"favorite"+(t.favorite?" selected":" not"),onClick:function(a){a.preventDefault(),t.favorite=!t.favorite,e.props.onItemUpdate(t)}},i.a.createElement(v.a,{icon:f.b})),i.a.createElement("button",{title:"Edit",onClick:function(a){a.preventDefault(),e.props.onItemEdit(t)}},i.a.createElement(v.a,{icon:f.c})),i.a.createElement("button",{title:"Delete",onClick:function(a){a.preventDefault(),e.props.onItemRemove(t)}},i.a.createElement(v.a,{icon:f.f}))),n=i.a.createElement("button",{className:"add",onClick:function(a){a.preventDefault(),e.props.onItemAdd(t)}},i.a.createElement(v.a,{icon:f.d})," ",t.collected?" Added to collection":" Add to NASA Collection");return i.a.createElement(h.b,{to:"/media/"+t.id,className:"ImageGridItem"},i.a.createElement("div",{className:"item-content"},i.a.createElement("div",{className:"image-holder"+(this.state.loaded?" loaded":"")},i.a.createElement("img",{src:t.previewUrl,alt:t.title})),i.a.createElement("p",{className:"image-caption"},i.a.createElement("span",{className:"image-attribution"},t.attribution),i.a.createElement("span",{className:"image-date"},t.date)),i.a.createElement("h2",{className:"item-title",title:t.title},t.title),i.a.createElement("p",{className:"item-description",title:t.description},t.description)),this.props.isSearch?n:a)}}]),t}(n.Component),y=(a(39),function(e){function t(){var e,a;Object(r.a)(this,t);for(var n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return(a=Object(s.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(i)))).state={query:"",loadedQuery:"",items:[]},a.onQueryChange=function(e){var t=e.target.value;if(a.setState({query:t}),t){var n=encodeURIComponent(e.target.value);fetch("https://images-api.nasa.gov/search?q=".concat(n)).then(function(e){return e.json()}).then(function(e){return a.onResultsLoad(e,t)})}else a.setState({items:[]})},a.onResultsLoad=function(e,t){if(a.state.query===t){var n=e.collection.items.filter(function(e){return-1!==["image","video"].indexOf(e.data[0].media_type)}).map(function(e){var t=e.data[0];return{id:t.nasa_id,collected:!1,title:t.title,description:t.description,attribution:t.photographer||t.secondary_creator||t.center,date:new Date(t.date_created).toLocaleDateString("en-GB",{year:"numeric",month:"short",day:"numeric"}),type:t.media_type,previewUrl:e.links&&e.links.length?e.links[0].href:null,mediaUrl:e.href,favorite:!1}});a.setState({items:n.slice(0,18),loadedQuery:t})}},a}return Object(u.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){this.setState(this.props.searchState),this.searchInput.focus()}},{key:"componentWillUnmount",value:function(){this.props.onSearchUnmount(this.state)}},{key:"render",value:function(){var e,t=this,a=this.state,n=a.query,o=a.loadedQuery,l=a.items;if(n&&n===o)if(l.length){var r=l.map(function(e){return i.a.createElement(b,{data:e,isSearch:!0,key:e.id,onItemAdd:t.props.onItemEdit})});e=i.a.createElement("div",{className:"search-list"},r,i.a.createElement(E,null))}else e=i.a.createElement("p",null,"No results found");else n&&(e=i.a.createElement("p",null,"Loading..."));return i.a.createElement("div",{className:"NasaSearch"},i.a.createElement(h.b,{to:"/"},"< Back to Collection"),i.a.createElement("h1",null,"Search from Nasa"),i.a.createElement("form",{onSubmit:function(e){return e.preventDefault()}},i.a.createElement("label",{htmlFor:"query"},"Enter Your search"),i.a.createElement("input",{type:"text",name:"query",value:n,onChange:this.onQueryChange,ref:function(e){return t.searchInput=e}})),e)}}]),t}(i.a.Component)),g=(a(40),function(e){function t(){return Object(r.a)(this,t),Object(s.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(u.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e,t=this;return e=this.props.list.length>0?i.a.createElement("div",{className:"collection-list"},this.props.list.map(function(e){return i.a.createElement(b,{data:e,key:e.id,onItemRemove:t.props.onItemRemove,onItemEdit:t.props.onItemEdit,onItemUpdate:t.props.onItemUpdate})}),i.a.createElement(E,null)):i.a.createElement("p",{className:"collection-empty"},"Your collection is empty"),i.a.createElement("div",{className:"Collection"},i.a.createElement("header",{className:"collection-header"},i.a.createElement("h1",null,"Nasa Collection"),i.a.createElement("div",null,i.a.createElement(h.b,{to:"/nasa-search",className:"new-item-button"},i.a.createElement(v.a,{icon:f.d})," Add new item"))),e)}}]),t}(n.Component)),I=a(24),C=(a(41),function(e){function t(e){var a;return Object(r.a)(this,t),(a=Object(s.a)(this,Object(m.a)(t).call(this,e))).state={title:"",description:"",type:"",previewUrl:"",mediaUrl:""},a.onFieldChange=a.onFieldChange.bind(Object(d.a)(a)),a.onFormSubmit=a.onFormSubmit.bind(Object(d.a)(a)),a}return Object(u.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){this.setState(this.props.item)}},{key:"onFieldChange",value:function(e){this.setState(Object(I.a)({},e.target.name,e.target.value))}},{key:"onFormSubmit",value:function(e){e.preventDefault(),this.state.collected?this.props.onItemUpdate(this.state):this.props.onItemAdd(this.state),this.props.onClose()}},{key:"render",value:function(){return i.a.createElement("div",{className:"EditItemForm"},i.a.createElement("style",{dangerouslySetInnerHTML:{__html:"\n          body { \n            overflow: hidden;\n          }\n        "}}),i.a.createElement("div",{className:"form-overlay",onClick:this.props.onClose}),i.a.createElement("div",{className:"form-box"},i.a.createElement("div",{className:"form-header"},i.a.createElement("h3",null,this.state.collected?"Edit":"Add item to collection"),i.a.createElement("div",null,i.a.createElement("button",{onClick:this.props.onClose},i.a.createElement(v.a,{icon:f.e})))),i.a.createElement("form",{disabled:!0,onSubmit:this.onFormSubmit},i.a.createElement("div",null,i.a.createElement("label",{htmlFor:"title"},"Title"),i.a.createElement("input",{name:"title",type:"text",value:this.state.title,onChange:this.onFieldChange})),i.a.createElement("div",null,i.a.createElement("label",{htmlFor:"description"},"Description"),i.a.createElement("textarea",{name:"description",rows:"5",value:this.state.description,onChange:this.onFieldChange})),i.a.createElement("div",null,i.a.createElement("label",{htmlFor:"type"},"Media type"),i.a.createElement("select",{name:"type",value:this.state.type,onChange:this.onFieldChange},i.a.createElement("option",{value:"video"},"Video"),i.a.createElement("option",{value:"image"},"Image"))),i.a.createElement("div",null,i.a.createElement("label",{htmlFor:"previewUrl"},"Preview image URL"),i.a.createElement("input",{name:"previewUrl",type:"url",value:this.state.previewUrl,onChange:this.onFieldChange})),i.a.createElement("div",null,i.a.createElement("label",{htmlFor:"mediaUrl"},"Media URL"),i.a.createElement("input",{name:"mediaUrl",type:"url",value:this.state.mediaUrl,onChange:this.onFieldChange})),i.a.createElement("button",{type:"submit"},i.a.createElement(v.a,{icon:f.a})," ",this.state.collected?" Save":" Add to collection"))))}}]),t}(n.Component)),k=(a(42),function(e){function t(){var e,a;Object(r.a)(this,t);for(var n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return(a=Object(s.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(i)))).state={item:null,mediaUrlList:null},a}return Object(u.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.props.item?this.setState({item:this.props.item},function(){return e.loadMediaUrls()}):this.loadItemData()}},{key:"loadItemData",value:function(){var e=this;fetch("https://images-api.nasa.gov/search?nasa_id=".concat(this.props.id)).then(function(e){return e.json()}).then(function(t){var a=t.collection.items[0];e.setState({item:{title:a.data[0].title,type:a.data[0].media_type,mediaUrl:a.href}},function(){return e.loadMediaUrls()})})}},{key:"loadMediaUrls",value:function(){var e=this;fetch(this.state.item.mediaUrl).then(function(e){return e.json()}).then(function(t){e.setState({mediaUrlList:t})})}},{key:"goBack",value:function(){this.props.history.goBack()}},{key:"render",value:function(){var e=this,t=this.state,a=t.item,n=t.mediaUrlList,o=i.a.createElement("div",{className:"media-loading"},i.a.createElement("p",null,"Loading..."));if(this.state.mediaUrlList&&this.state.mediaUrlList.length)switch(a.type){case"video":o=i.a.createElement("video",{controls:!0,autoPlay:!0},n.map(function(e,t){return i.a.createElement("source",{src:e,key:t})}));break;case"image":o=i.a.createElement("img",{src:n[0]})}return i.a.createElement("div",{className:"MediaViewer"},i.a.createElement("div",{className:"media-header"},i.a.createElement("h1",null,a?a.title:"Loading..."),i.a.createElement("div",null,i.a.createElement("button",{onClick:function(){return e.goBack()}},i.a.createElement(v.a,{icon:f.e})))),i.a.createElement("div",{className:"media-holder"},o))}}]),t}(n.Component)),j=function(e){function t(e){var a;Object(r.a)(this,t),a=Object(s.a)(this,Object(m.a)(t).call(this,e));var n=localStorage.getItem("collection");return a.state={collection:n?JSON.parse(n):[],editingItem:null,searchState:{}},a.onItemAdd=a.onItemAdd.bind(Object(d.a)(a)),a.onItemEdit=a.onItemEdit.bind(Object(d.a)(a)),a.onItemEditClose=a.onItemEditClose.bind(Object(d.a)(a)),a.onItemRemove=a.onItemRemove.bind(Object(d.a)(a)),a.onItemUpdate=a.onItemUpdate.bind(Object(d.a)(a)),a}return Object(u.a)(t,e),Object(c.a)(t,[{key:"onItemAdd",value:function(e){e.collected=!0;var t=this.state.collection;t.push(e),this.updateCollection(t)}},{key:"onItemRemove",value:function(e){var t=this.state.collection.filter(function(t){return t.id!==e.id});this.updateCollection(t)}},{key:"onItemEdit",value:function(e){this.setState({editingItem:e})}},{key:"onItemEditClose",value:function(){this.setState({editingItem:null})}},{key:"onItemUpdate",value:function(e){var t=this.state.collection.map(function(t){return t.id===e.id?e:t});this.updateCollection(t)}},{key:"updateCollection",value:function(e){this.setState({collection:e}),localStorage.setItem("collection",JSON.stringify(e))}},{key:"render",value:function(){var e=this;return i.a.createElement("div",{className:"App"},this.state.editingItem&&i.a.createElement(C,{item:this.state.editingItem,onItemUpdate:this.onItemUpdate,onItemAdd:this.onItemAdd,onClose:this.onItemEditClose}),i.a.createElement(h.a,null,i.a.createElement(p.a,{path:"/",exact:!0,render:function(){return i.a.createElement(g,{list:e.state.collection,onItemRemove:e.onItemRemove,onItemEdit:e.onItemEdit,onItemUpdate:e.onItemUpdate})}}),i.a.createElement(p.a,{path:"/nasa-search",render:function(){return i.a.createElement(y,{searchState:e.state.searchState,onSearchUnmount:function(t){return e.setState({searchState:t})},onItemEdit:e.onItemEdit})}}),i.a.createElement(p.a,{path:"/media/:id",render:function(t){var a=t.match,n=t.history;return i.a.createElement(k,{history:n,id:a.params.id,item:e.state.collection.find(function(e){return e.id===a.params.id})})}})))}}]),t}(i.a.Component);a(43);l.a.render(i.a.createElement(j,null),document.getElementById("root"))}},[[25,1,2]]]);
//# sourceMappingURL=main.b5f81477.chunk.js.map